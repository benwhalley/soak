name: zero_shot
settings:
  model_name: gpt-4o-mini
extra_context:
  persona: Experienced qualitative researcher
  research_question: None
steps:
- split:
    name: chunks
    chunk_size: 20000
    inputs:
    - documents
    near:
    - "\n"
    - .
- map:
    name: code_extraction
    inputs:
    - chunks
- map:
    name: theme_generation
    inputs:
    - code_extraction
    model_name: gpt-4o
- reduce:
    name: joined_themes
    template_text: '{{theme_generation.to_markdown()}}'
    inputs:
    - theme_generation
- reduce:
    name: joined_codes
    template_text: '{{code_extraction.to_markdown()}}'
    inputs:
    - code_extraction
- transform:
    name: codes
    template_name: code_consolidation.md
    inputs:
    - joined_codes
- transform:
    name: themes
    template_name: theme_consolidation.md
    inputs:
    - joined_themes
    - codes
- transform:
    name: narrative_report
    inputs:
    - codes
    - themes
